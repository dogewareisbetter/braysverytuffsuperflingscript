-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local StarterGui = game:GetService("StarterGui")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- Key Sistemi (Dialog ile key sor)
local function askKey()
    local keyGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
    keyGui.Name = "King Bray Key Gui"
    keyGui.ResetOnSpawn = false

    local frame = Instance.new("Frame", keyGui)
    frame.Size = UDim2.new(0, 300, 0, 150)
    frame.Position = UDim2.new(0.5, -150, 0.5, -75)
    frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    frame.BorderSizePixel = 0
    frame.AnchorPoint = Vector2.new(0.5, 0.5)
    frame.ClipsDescendants = true
    frame.ZIndex = 10

    local title = Instance.new("TextLabel", frame)
    title.Size = UDim2.new(1, 0, 0, 50)
    title.BackgroundTransparency = 1
    title.Font = Enum.Font.GothamBold
    title.TextSize = 24
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.Text = "Enter Key to Use Brays Script"
    title.TextWrapped = true
    title.ZIndex = 9

    local inputBox = Instance.new("TextBox", frame)
    inputBox.Size = UDim2.new(0.8, 0, 0, 40)
    inputBox.Position = UDim2.new(0.1, 0, 0.4, 0)
    inputBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    inputBox.PlaceholderText = "Enter your key here"
    inputBox.ClearTextOnFocus = false
    inputBox.TextScaled = true
    inputBox.Font = Enum.Font.GothamBold
    inputBox.ZIndex = 11

    local submitBtn = Instance.new("TextButton", frame)
    submitBtn.Size = UDim2.new(0.5, 0, 0, 40)
    submitBtn.Position = UDim2.new(0.25, 0, 0.75, 0)
    submitBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 127)
    submitBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    submitBtn.Text = "Submit"
    submitBtn.TextScaled = true
    submitBtn.Font = Enum.Font.GothamBold
    submitBtn.AutoButtonColor = true
    submitBtn.ZIndex = 11

    local function denyAccess()
        StarterGui:SetCore("SendNotification", {
            Title = "Access Denied",
            Text = "messed up dumbass ima head out..",
            Duration = 2,
            Icon = "rbxassetid://7734068321"
        })
        wait(2)
        keyGui:Destroy()
        return false
    end

    local function acceptAccess()
        StarterGui:SetCore("SendNotification", {
            Title = "Access Granted",
            Text = "Hey bbg use this script to its max its tuff",
            Duration = 2,
            Icon = "rbxassetid://7734068321"
        })
        keyGui:Destroy()
        return true
    end

    local accessGranted = false
    submitBtn.MouseButton1Click:Connect(function()
        local enteredKey = inputBox.Text
        if enteredKey == "Brayistheking1234" then
            accessGranted = true
            acceptAccess()
        else
            denyAccess()
        end
    end)

    -- Wait loop until access granted or gui destroyed
    repeat wait() until accessGranted or not keyGui.Parent
    return accessGranted
end

if not askKey() then
    -- Key yanlÄ±ÅŸsa veya kapatÄ±lÄ±rsa script durur
    return
end

-- Fling GUI BaÅŸlangÄ±Ã§ --

-- Player finder
local function findPlayers(searchString)
    local foundPlayers = {}
    local strl = searchString:lower()
    for _, player in ipairs(Players:GetPlayers()) do
        if strl == "all" or strl == "everyone" then
            table.insert(foundPlayers, player)
        elseif strl == "others" and player ~= LocalPlayer then
            table.insert(foundPlayers, player)
        elseif strl == "me" and player == LocalPlayer then
            table.insert(foundPlayers, player)
        elseif player.Name:lower():sub(1, #searchString) == strl then
            table.insert(foundPlayers, player)
        end
    end
    return foundPlayers
end

-- GUI
local gui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
gui.Name = "Brays Fling GUI"
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Frame
local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 320, 0, 270)
frame.Position = UDim2.new(0.5, -160, 0.5, -135)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.ClipsDescendants = true
frame.ZIndex = 2

Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

-- Top bar
local topBar = Instance.new("Frame", frame)
topBar.Size = UDim2.new(1, 0, 0, 35)
topBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
topBar.BorderSizePixel = 0
topBar.ZIndex = 3

Instance.new("UICorner", topBar).CornerRadius = UDim.new(0, 10)

-- Title
local title = Instance.new("TextLabel", topBar)
title.Size = UDim2.new(1, 0, 1, 0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Text = "â˜ ï¸ðŸ¥¶Bray Fling GUIðŸ¥¶â˜ ï¸"
title.ZIndex = 4

Instance.new("UICorner", box).CornerRadius = UDim.new(0, 6)

-- Button
local button = Instance.new("TextButton", frame)
button.Position = UDim2.new(0.1, 0, 0.45, 0)
button.Size = UDim2.new(0.8, 0, 0.15, 0)
button.BackgroundColor3 = Color3.fromRGB(0, 170, 127)
button.Font = Enum.Font.GothamBold
button.Text = "Press Z to fling"
button.TextColor3 = Color3.new(1, 1, 1)
button.TextSize = 18
button.ZIndex = 3

Instance.new("UICorner", button).CornerRadius = UDim.new(0, 6)

-- Notification
local notification = Instance.new("TextLabel", frame)
notification.Position = UDim2.new(0.1, 0, 0.65, 0)
notification.Size = UDim2.new(0.8, 0, 0.2, 0)
notification.BackgroundTransparency = 1
notification.Font = Enum.Font.Gotham
notification.TextColor3 = Color3.fromRGB(255, 255, 255)
notification.TextSize = 14
notification.Text = ""
notification.TextWrapped = true
notification.Visible = false
notification.ZIndex = 3

-- Notification anim
local function showNotice(text, color)
    notification.Text = text
    notification.TextColor3 = color or Color3.fromRGB(255, 255, 255)
    notification.Visible = true
    TweenService:Create(notification, TweenInfo.new(0.3), { TextTransparency = 0 }):Play()
    wait(2)
    TweenService:Create(notification, TweenInfo.new(0.3), { TextTransparency = 1 }):Play()
    wait(0.3)
    notification.Visible = false
end

-- brays fling
getgenv().VelocityChanger = false
getgenv().Velocity = Vector3.new(9999999,9999999,9999999)
getgenv().KeyBind = "z"
--Velocity
--------------------------------------------------
local Players     = game:GetService("Players")
local RunService  = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local Character   = LocalPlayer.Character
local RootPart    = Character:FindFirstChild("HumanoidRootPart")


local Heartbeat, RStepped, Stepped = RunService.Heartbeat, RunService.RenderStepped, RunService.Stepped

LocalPlayer.CharacterAdded:Connect(function(NewCharacter)
    Character = NewCharacter
end)

local RVelocity, YVelocity = nil, 0.1
--Notify Function
--------------------------------------------------
function sendnotifi(message)


    game.StarterGui:SetCore("SendNotification", {
        Title = 'Fling Mode';
        Text = message;
        Duration = "1";
    })
    end
--Notify
-------------------------------------------------
    UIS.InputBegan:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.Z then
            if VelocityChanger == false then
                sendnotifi("Fling OFF")
            elseif VelocityChanger == true then
                sendnotifi("Fling ON")
            end
        end
    end)
    
--Velocity Function
-------------------------------------------------

UIS.InputBegan:Connect(function(input)
if not (UIS:GetFocusedTextBox()) then
    if input.KeyCode == Enum.KeyCode.Z then
        if VelocityChanger then
            VelocityChanger = false
        else
            VelocityChanger = true
            task.spawn(function()
                    while VelocityChanger do
                        print("Running")
                        if (not RootPart) or (not RootPart.Parent) or (not RootPart.Parent.Parent) then
                            repeat task.wait() RootPart = Character:FindFirstChild("HumanoidRootPart") until RootPart ~= nil
                        else
                            RVelocity = RootPart.Velocity

                            RootPart.Velocity = type(Velocity) == "vector" and Velocity or Velocity(RVelocity)

                            RStepped:wait()

                            RootPart.Velocity = RVelocity
                        end
                    Heartbeat:wait()
                end
            end)
        end
        end
    end
end)
-- Button click
button.MouseButton1Click:Connect(function()
    local targets = findPlayers(box.Text)
    if #targets > 0 then
        showNotice("", Color3.fromRGB(0, 255, 0))
        aggressiveFling(targets[1])
    else
        showNotice("Press Z to turn on and off fling", Color3.fromRGB(255, 75, 75))
    end
end)

-- Draggable GUI
local dragging, dragInput, dragStart, startPos
topBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Load notice
StarterGui:SetCore("SendNotification", {
    Title = "Fling GUI",
    Text = "Downloaded âœ” - Created by brayðŸ¥¶",
    Icon = "rbxassetid://7734068321",
    Duration = 5
})
